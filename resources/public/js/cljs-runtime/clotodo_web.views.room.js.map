{"version":3,"sources":["clotodo_web/views/room.cljs"],"mappings":"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","names":["clotodo-web.views.room/room-page","cljs.core/deref","new-todo-title","reagent.core.atom","new-todo-desc","room","clotodo-web.state/current-room","p1__11949#","clotodo-web.api/get-todos","cljs.core/reset!","clotodo-web.state/todos","p1__11951#","p1__11952#","clotodo-web.state/current-page","e","clotodo-web.api/create-todo","resp","p1__11950#","cljs.core/empty?","iter__5503__auto__","s__11954","cljs.core/LazySeq","temp__5823__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5501__auto__","size__5502__auto__","cljs.core/count","b__11956","cljs.core/chunk-buffer","i__11955","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__11953","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","todo","clotodo-web.api/toggle-todo","_","todos","js/confirm","clotodo-web.api/delete-todo","cljs.core/chunk-first"],"sourcesContent":["(ns clotodo-web.views.room\n (:require [reagent.core :as r]\n           [clotodo-web.state :as state]\n           [clotodo-web.api :as api]))\n\n\n(defn room-page []\n (let [new-todo-title (r/atom \"\")\n       new-todo-desc (r/atom \"\")\n       room @state/current-room]\n  \n   (when room\n     (api/get-todos (:id room) #(reset! state/todos %)))\n  \n   (fn []\n     (let [room @state/current-room]\n       [:div.room-page\n        [:header.room-header\n         [:button.btn-back\n          {:on-click #(reset! state/current-page :dashboard)}\n          \"\u2190 Back\"]\n         [:div.room-header-content\n          [:h1.room-title (:name room)]\n          (when-not (:is_public room)\n            [:span.room-code-display \"Code: \" (:access_code room)])]]\n       \n        [:div.room-content\n         [:div.todo-form-card\n          [:h2 \"Add New Todo\"]\n          [:form\n           {:on-submit (fn [e]\n                        (.preventDefault e)\n                        (api/create-todo (:id room) @new-todo-title @new-todo-desc\n                          (fn [resp]\n                            (reset! new-todo-title \"\")\n                            (reset! new-todo-desc \"\")\n                            (api/get-todos (:id room) #(reset! state/todos %)))))}\n          \n           [:input.todo-input\n            {:type \"text\"\n             :placeholder \"What needs to be done?\"\n             :value @new-todo-title\n             :on-change #(reset! new-todo-title (.. % -target -value))\n             :required true}]\n          \n           [:textarea.todo-textarea\n            {:placeholder \"Description (optional)\"\n             :value @new-todo-desc\n             :on-change #(reset! new-todo-desc (.. % -target -value))\n             :rows 3}]\n          \n           [:button.btn-primary\n            {:type \"submit\"}\n            \"Add Todo\"]]]\n        \n         [:div.todos-list\n          (if (empty? @state/todos)\n            [:div.empty-state\n             [:p \"No todos yet. Add one above!\"]]\n           \n            (for [todo @state/todos]\n              ^{:key (:id todo)}\n              [:div.todo-item\n               {:class (when (:is_done todo) \"completed\")}\n               [:div.todo-checkbox\n                [:input\n                 {:type \"checkbox\"\n                  :checked (:is_done todo)\n                  :on-change #(api/toggle-todo (:id todo)\n                                (fn [_]\n                                  (api/get-todos (:id room)\n                                    (fn [todos] (reset! state/todos todos)))))}]]\n               [:div.todo-content\n                [:h3.todo-title (:title todo)]\n                (when (:description todo)\n                  [:p.todo-description (:description todo)])\n                [:span.todo-creator \"by \" (:creator_name todo)]]\n               [:button.todo-delete\n                {:on-click #(when (js/confirm \"Delete this todo?\")\n                             (api/delete-todo (:id todo)\n                               (fn [_]\n                                 (api/get-todos (:id room)\n                                   (fn [todos] (reset! state/todos todos))))))}\n                \"X\"]]))]]]))))"]}